{"ast":null,"code":"var _jsxFileName = \"/Users/matheusferreira/Desktop/desafio-contato-seguro/src/components/BookForm/BookForm.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport useLocalStorage from '../LocalStorage/useLocalStorage';\nimport './BookForm.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst BookForm = ({\n  onSave,\n  initialData = {\n    name: '',\n    authorId: '',\n    pages: 0\n  }\n}) => {\n  _s();\n  const [authors] = useLocalStorage('authors', []);\n  const [books] = useLocalStorage('books', []);\n  const [authorOptions, setAuthorOptions] = useState([]);\n  useEffect(() => {\n    const options = authors.map(author => /*#__PURE__*/_jsxDEV(\"option\", {\n      value: author.id,\n      children: author.name\n    }, author.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 13\n    }, this));\n    setAuthorOptions(options);\n  }, [authors]);\n  const generateId = () => {\n    const maxId = books.reduce((max, book) => Math.max(max, parseInt(book.id || '0')), 0);\n    return (maxId + 1).toString();\n  };\n  const validate = values => {\n    const errors = {};\n    if (!values.name) {\n      errors.name = 'Nome é obrigatório';\n    }\n    if (!values.authorId) {\n      errors.authorId = 'Autor é obrigatório';\n    }\n    if (values.pages != null && values.pages < 0) {\n      errors.pages = 'O número de páginas não pode ser negativo';\n    }\n    return errors;\n  };\n  return /*#__PURE__*/_jsxDEV(Formik, {\n    initialValues: initialData,\n    validate: validate,\n    onSubmit: (values, actions) => {\n      const bookToSave = initialData.id ? values : {\n        ...values,\n        id: generateId()\n      };\n      onSave(bookToSave);\n      actions.setSubmitting(false);\n    },\n    children: ({\n      isSubmitting,\n      setFieldValue\n    }) => /*#__PURE__*/_jsxDEV(Form, {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Adicione aqui o Livro \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Field, {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"Nome do Livro\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        name: \"name\",\n        component: \"div\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(Field, {\n          as: \"select\",\n          name: \"authorId\",\n          onChange: e => setFieldValue('authorId', e.target.value),\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: \"\",\n            children: \"Selecione um Autor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 29\n          }, this), authorOptions]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n          name: \"authorId\",\n          component: \"div\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 61,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Field, {\n        type: \"number\",\n        name: \"pages\",\n        placeholder: \"N\\xFAmero de P\\xE1ginas\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n        name: \"pages\",\n        component: \"div\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"button-save\",\n        type: \"submit\",\n        disabled: isSubmitting,\n        children: \"Salvar\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 9\n  }, this);\n};\n_s(BookForm, \"56x6k5uSLv3LTre0jEq8ZxfJnak=\", false, function () {\n  return [useLocalStorage, useLocalStorage];\n});\n_c = BookForm;\nexport default BookForm;\nvar _c;\n$RefreshReg$(_c, \"BookForm\");","map":{"version":3,"names":["React","useEffect","useState","Formik","Form","Field","ErrorMessage","useLocalStorage","jsxDEV","_jsxDEV","BookForm","onSave","initialData","name","authorId","pages","_s","authors","books","authorOptions","setAuthorOptions","options","map","author","value","id","children","fileName","_jsxFileName","lineNumber","columnNumber","generateId","maxId","reduce","max","book","Math","parseInt","toString","validate","values","errors","initialValues","onSubmit","actions","bookToSave","setSubmitting","isSubmitting","setFieldValue","type","placeholder","component","as","onChange","e","target","className","disabled","_c","$RefreshReg$"],"sources":["/Users/matheusferreira/Desktop/desafio-contato-seguro/src/components/BookForm/BookForm.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Formik, Form, Field, ErrorMessage } from 'formik';\nimport { Book } from '../../models/Book'; \nimport { Author } from '../../models/Author'; \nimport useLocalStorage from '../LocalStorage/useLocalStorage'; \nimport './BookForm.css';\ninterface BookFormProps {\n    onSave: (book: Book) => void;\n    initialData?: Book;\n}\n\nconst BookForm: React.FC<BookFormProps> = ({ onSave, initialData = { name: '', authorId: '', pages: 0 } }) => {\n    const [authors] = useLocalStorage<Author[]>('authors', []);\n    const [books] = useLocalStorage<Book[]>('books', []);\n    const [authorOptions, setAuthorOptions] = useState<JSX.Element[]>([]);\n\n    useEffect(() => {\n        const options = authors.map(author => (\n            <option key={author.id} value={author.id}>\n                {author.name}\n            </option>\n        ));\n        setAuthorOptions(options);\n    }, [authors]);\n\n    const generateId = () => {\n        const maxId = books.reduce((max, book) => Math.max(max, parseInt(book.id || '0')), 0);\n        return (maxId + 1).toString();\n    };\n\n    const validate = (values: Book) => {\n        const errors: Record<string, string> = {};\n        if (!values.name) {\n            errors.name = 'Nome é obrigatório';\n        }\n        if (!values.authorId) {\n            errors.authorId = 'Autor é obrigatório';\n        }\n        if (values.pages != null && values.pages < 0) {\n            errors.pages = 'O número de páginas não pode ser negativo';\n        }\n        return errors;\n    };\n\n    return (\n        <Formik\n            initialValues={initialData}\n            validate={validate}\n            onSubmit={(values, actions) => {\n                const bookToSave = initialData.id ? values : { ...values, id: generateId() };\n                onSave(bookToSave);\n                actions.setSubmitting(false);\n            }}\n        >\n            {({ isSubmitting, setFieldValue }) => (\n                <Form>\n                    <h1>Adicione aqui o Livro </h1>\n                    <Field type=\"text\" name=\"name\" placeholder=\"Nome do Livro\" />\n                    <ErrorMessage name=\"name\" component=\"div\" />\n\n                    <div>\n                        <Field as=\"select\" name=\"authorId\" onChange={(e: React.ChangeEvent<HTMLSelectElement>) => setFieldValue('authorId', e.target.value)}>\n                            <option value=\"\">Selecione um Autor</option>\n                            {authorOptions}\n                        </Field>\n                        <ErrorMessage name=\"authorId\" component=\"div\" />\n                    </div>\n                    <Field type=\"number\" name=\"pages\" placeholder=\"Número de Páginas\" />\n                    <ErrorMessage name=\"pages\" component=\"div\" />\n\n                    <button className='button-save' type=\"submit\" disabled={isSubmitting}>\n                        Salvar\n                    </button>\n                </Form>\n            )}\n        </Formik>\n    );\n};\n\nexport default BookForm;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}